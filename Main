/*
 Name:		Sketch1.ino
 Created:	10/13/2017 2:05:56 PM
 Author:	qwaszx
*/

//Main arduino code
#include <Adafruit_LEDBackpack.h>
#include <Adafruit_GFX.h>
#include "Adafruit_LEDBackpack.h"

Adafruit_7segment fauxTimer = Adafruit_7segment();

#define DISPLAY_ADDRESS1  //---------------------!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

long previousMillis;
short state = 0;
long gameDurration;

short gameSelectPins[2] = {};//-----put your pins here----------------------------------

void setup() {
	fauxTimer.begin(DISPLAY_ADDRESS1);
}

void loop() {

	switch (state) {
	case 1: //runing
		char gameMode = 0;
		bool gamesCompleated[3]={false,false,false};
		if (millis() - previousMillis >= 1000) {
			if (upDateTimer(gameDurration)) state = 2;
		}
		for (short i = 0; i < 3; i++)
		{
			if (digitalRead(gameSelectPins[i])&& (!gamesCompleated[i]))
			{
				gameMode = i;
			}
			
		}
		switch (gameMode){
		case 1:
			if (simon()) {
				gamesCompleated[0] = true;
			}
			break;
		case 2:
			if (resistor())
			{
				gamesCompleated[1] = true;
			}
			break;
		case 3:
			if (binary())
			{
				gamesCompleated[2] = true;
			}
			break;
		}

		break;

	case 2: //game over
		gameOver();
		break;

	case 3:

		break;

	}
}

bool upDateTimer(double upDateTimerIn) {//returns true when time runs out
	int countDown = (upDateTimerIn - millis()) / 1000;
	fauxTmer.print(countDown);
	if (countDown>0) {
		return false;
	}
	else {
		return true;
	}
}
//games
bool simon() {
	return true;
}

bool resistor() {
	bool stay=true;
	while (stay)
	{

	}
}

bool binary() {
	bool stay = true;
	int targetNumber, currentNumber;
	bool targetBinaryNumber[10] = {};
	targetNumber = random(5, 999);
	short buttonsPins[10] = {1,2,3,4,5,6,7,8,9,10};//--------------------------------------Put in your pins-----!!!!!
	bool buttonsStates[10] = {false,false,false,false,false,false,false,false,false,false};
	for (short i = 0; i < 10; i++)
	{
		targetBinaryNumber[i] = bitRead(targetNumber,i);
		digitalWrite(ledPins[i],targetBinaryNumber[i]);

	}
	while (stay)
	{
		for (int i = 0; i < 10; j++)
		{
			buttonsStates[i] = false;
			buttonsStates[i] = digitalRead(buttonsPins[i]);
		}

	}
}
void gameOver() {

}

void win() {

}
